import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt

# CSV íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
@st.cache_data
def load_data():
    file_path = "age2411.csv"
    df = pd.read_csv(file_path)
    return df

df = load_data()

# ì§€ì—­ ëª©ë¡ ì¶”ì¶œ
df["í–‰ì •êµ¬ì—­"] = df["í–‰ì •êµ¬ì—­"].str.split(" ").str[-1]  # í–‰ì •êµ¬ì—­ì—ì„œ ë§ˆì§€ë§‰ ë‹¨ì–´ë§Œ ì¶”ì¶œ
regions = df["í–‰ì •êµ¬ì—­"].unique()

# ìŠ¤íŠ¸ë¦¼ë¦¿ UI ì„¤ì •
st.title("ğŸŒğŸ“Š ì§€ì—­ë³„ ì¸êµ¬ êµ¬ì¡° ì‹œê°í™”")

# ì§€ì—­ ì„ íƒ
selected_region = st.selectbox("ğŸ“ ì›í•˜ëŠ” ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”:", regions)

# ì„ íƒí•œ ì§€ì—­ ë°ì´í„° í•„í„°ë§
selected_data = df[df["í–‰ì •êµ¬ì—­"] == selected_region]

if not selected_data.empty:
    # ì—°ë ¹ë³„ ì¸êµ¬ ë°ì´í„° ì¶”ì¶œ
    age_columns = [col for col in df.columns if "2024" in col and "ê³„" in col and "ë‚ " not in col and col not in ["2024\ub14411\uc6d4_\uacc4_\ucc28\uc6d0";
